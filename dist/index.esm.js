!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PurifyHTML=e():t.PurifyHTML=e()}(self,(function(){return function(){"use strict";var t={d:function(e,r){for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:function(){return l},setParser:function(){return i}});const r=(()=>{const t=(e,r=0)=>{if(e._d=r,!e.children.length)return r;[...e.children].forEach((e=>t(e,r+1)))};return e=>(t(e),[...e.querySelectorAll("*")].sort(((t,e)=>e._d-t._d)))})(),o=t=>{try{return new URL(t)}catch(t){return null}},n=t=>{if(Object.prototype.hasOwnProperty.call(globalThis,"structuredClone"))return structuredClone(t);const e={};for(let r in t)"object"==typeof t[r]?e[r]=n(t[r]):e[r]=t[r];return e},s={"%correct-link%"(t){return{remove:null===o(t)}},"%http-link%"(t){const e=o(t);return{remove:null===e||"http:"!==e.protocol}},"%https-link%"(t){const e=o(t);return{remove:null===e||"https:"!==e.protocol}},"%ftp-link%"(t){const e=o(t);return{remove:null===e||"ftp:"!==e.protocol}},"%https-link-without-search-params%"(t){const e=o(t);return{remove:null===e||""!==e.search||"https:"!==e.protocol}},"%http-link-without-search-params%"(t){const e=o(t);return{remove:null===e||""!==e.search||"http:"!==e.protocol}},"%same-origin%"(t){const e=o(t);return{remove:null===e||self.location.origin!==e.origin}}};let a=(()=>{const t=(new DOMParser).parseFromString("","text/html").querySelector("body");return{parse(e){return t.innerHTML=e,t},stringify(t){return t.innerHTML}}})();const i=(t={})=>Object.prototype.hasOwnProperty.call(t,"parse")?Object.prototype.hasOwnProperty.call(t,"stringify")?(a=t,1):(console.error('cannot to find method "stringify" in custom parser!',t),0):(console.error('cannot to find method "parse" in custom parser!',t),0);var l=class{constructor(t=[]){var e;this.allowedTags=(e=t,e.map(n)).reduce(((t,e)=>{switch(typeof e){case"string":t[e]=Object.assign(t[e]||{},{});break;case"object":t[e.name]=Object.assign(t[e]||{},(t=>{const e=[];return Object.prototype.hasOwnProperty.call(t,"attributes")||(t.attributes=[]),t.attributes.forEach((t=>{switch(typeof t){case"string":e.push({name:t});break;case"object":e.push(t)}})),t.attributes=e,t})(e))}return t}),{}),this.whiteList=Object.keys(this.allowedTags),this.sanitize.bind(this)}sanitize(t){const e=a.parse(t);return r(e).forEach((t=>{const e=t.tagName.toLowerCase();if(this.whiteList.includes(e)){const r=this.allowedTags[e];if(Object.prototype.hasOwnProperty.call(r,"attributes")&&r.attributes.length>0){let e=[],o=[];for(let n=0;n<t.attributes.length;n++){const a=t.attributes[n],i=r.attributes.find((t=>t.name===a.name));i?Object.prototype.hasOwnProperty.call(i,"value")&&("string"==typeof i.value?a.value!==i.value&&o.push(a.name):i.value instanceof RegExp?i.value.test(a.value)||o.push(a.name):Array.isArray(i.value)?i.value.includes(a.value)||o.push(a.name):"object"==typeof i.value&&Object.prototype.hasOwnProperty.call(i.value,"preset")&&Object.prototype.hasOwnProperty.call(s,i.value.preset)?s[i.value.preset](a.value).remove&&o.push(a.name):o.push(a.name)):e.push(a.name)}e.forEach((e=>t.removeAttribute(e))),o.forEach((e=>{return r=e,t.setAttribute(r,"");var r}))}else{const e=[];for(let r=0;r<t.attributes.length;r++)e.push(t.attributes[r].name);e.forEach((e=>t.removeAttribute(e)))}}else t.insertAdjacentHTML("afterend",t.innerHTML),t.remove()})),a.stringify(e)}toHTMLEntities(t){return t.split("").map((t=>`&#${t.charCodeAt()};`)).join("")}};return e}()}));